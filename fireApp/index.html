<html>
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Fire App">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta name="author" content="reedleoneil">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="bootstrap.js"></script>
    <link rel="stylesheet" type="text/css" href="bootstrap.css">
</head>
<body>
    <div style="position: relative; height: 100%; width: 100%;">
        <img id="splashscreen" align="middle" style="z-index: 4; position: absolute; height:100%; width:100%;" src="splash.jpg" />

        <div id="smoke_sensor1" style="visibility: hidden; z-index: 2; position: absolute; height:auto; width:auto; top: 50%; left: 30%; font-size: 150%;"></div>
        <div id="smoke_sensor2" style="visibility: hidden; z-index: 2; position: absolute; height:auto; width:auto; top: 20%; left: 30%; font-size: 150%;"></div>
        <div id="smoke_sensor3" style="visibility: hidden; z-index: 2; position: absolute; height:auto; width:auto; top: 80%; left: 30%; font-size: 150%;"></div>

        <div style="z-index: 2; position: absolute; height:auto; width:auto; top: 26%; left: 36.5%; font-size: 150%;"><span id="temp_sensor1">32</span><span> °C</span></div>
        <div style="z-index: 2; position: absolute; height:auto; width:auto; top: 78%; left: 36.5%; font-size: 150%;"><span id="temp_sensor2">32</span><span> °C</span></div>
        <div style="z-index: 2; position: absolute; height:auto; width:auto; top: 43%; left: 79%; font-size: 150%;"><span id="temp_sensor3">32</span><span> °C</span></div>

        <img id="r001" align="middle" style="z-index: 1; position: absolute; height: 100%; width: 100%;" src="r1.png" />
        <img id="r002" align="middle" style="z-index: 1; position: absolute; height: 100%; width: 100%;" src="r2.png" />
        <img id="r003" align="middle" style="z-index: 1; position: absolute; height: 100%; width: 100%;" src="r3.png" />

        <img align="middle" style="z-index: 0; position: absolute; height: 100%; width: 100%;" src="fire2.png" />
        <img id="floorplan" align="middle" style="z-index: 0; position: absolute; height: 100%; width: 100%;" src="fire1.png" />
    </div>
</body>

<script>
    var r001 = false;
    var r002 = false;
    var r003 = false;

    $("#r001").fadeOut();
    $("#r002").fadeOut();
    $("#r003").fadeOut();

    var alarm = setInterval(function () {
        if (r001) {
            $("#r001").fadeIn();
            $("#r001").fadeOut();
        }

        if (r002) {
            $("#r002").fadeIn();
            $("#r002").fadeOut();
        }

        if (r003) {
            $("#r003").fadeIn();
            $("#r003").fadeOut();
        }

        if (r001 || r002 || r003) {
            $("#floorplan").fadeOut();
            $("#floorplan").fadeIn();
        }

    }, 1000);

    var sensors = setInterval(function () {
        $.post("http://192.168.10.177/", { data: 1 } ,function (data, status) {
            data = JSON.parse(data);
            if (data.s1_triggered)
                r001 = true;
            else
                r001 = false;
            if (data.s2_triggered)
                r002 = true;
            else
                r002 = false;
            if (data.s3_triggered)
                r003 = true;
            else
                r003 = false;
            $("#smoke_sensor1").text(data.smoke_sensor1);
            $("#smoke_sensor2").text(data.smoke_sensor2);
            $("#smoke_sensor3").text(data.smoke_sensor3);
            $("#temp_sensor1").text(data.temp_sensor1);
            $("#temp_sensor2").text(data.temp_sensor2);
            $("#temp_sensor3").text(data.temp_sensor3);
            console.log(data);
        });
    }, 2000);

    $("#splashscreen").click(function () {
        $("#splashscreen").fadeOut();
    });
</script>

</html>

